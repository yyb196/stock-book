<meta http-equiv='Content-Type' content='text/html; charset=UTF-8'>
<html>
  <head>
	<title>my stock book</title>
	<link href="/stylesheets/main.css" rel="stylesheet" type="text/css"/>
	<link href="/stylesheets/jquery.jnotify.min.css" rel="stylesheet" type="text/css"/>		
  </head>
  <body style="background-color: coral">
        <table border="0" width="100%"><tr><td><span><h1>Welcome {{ username }}!</h1></span></td><td><div style="float:right"><h3><a href="{{url}}">{{url_linktext}}</a></h3></div></td></tr></table>
        
        {% if isAdmin %}
<table border="0" width="100%"><tr><td width="50%">
        <div style="float:left">
        <form id='newStockForm' action='/admin/addNewStock' method='POST'>
           add stock: 
            <input id='stock_value' type='text' name='stock_value' /> 
            <input id='addStock' type='button' onclick="addStockCheck()" value='submit'/>
        </form>
       </div></td>
      <td width="30">
      <form action="/" method="post">
	<input type="text" name="q" />
	<input type="submit" value="Search"/>
	</form>
      </td><td width="20%">
       <div style="float:right">
		<form action='/admin/updateStockPrice' method='get'>
            <p><input type='submit' value='updateStockPrice'/></p>
        </form>
        </div></td></tr></table>
        {% endif %}

        <p><div>
			{% if hasPre %}
			    <div style="float:right"><a href="{{preHref}}">Pre Page</a></div>
			{% endif %}
			{% if hasPre or hasNext %}
			<div style="float:right">
				&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GoTo:<select onchange="changePage(this)">
					{% for p in pageNoList %}
					    <option value="{{p.0}}" {% if p.2 %}selected{% endif %}>{{p.1}}</option>
					{% endfor %}
				</select>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</div>
			{% endif %}
			{% if hasNext %}
			    <div style="float:right"><a href="{{nextHref}}">Next Page</a></div>
			{% endif %}
		</div></p>
		<p> <br/></p>
        <table width="100%" border="1" id="mainTable" >
            <tr>
                <th style="width:80">name</th>
                {% for t in columnTitles %}
                <th style="width:40;word-break:break-all; word-wrap:break-all;">{{t}}</th>
                {% endfor %}
                <th>last comment</th>
                {% if isAdmin %}
                <th style="width:40">operation</th>
                <th  style="width:80">new comment</th>
                {% endif %}
            </tr>
        {% for stock in stocks %}
            <tr>
            <td style="width:80">
				{% if stock.high_light %}
				==>
				{% endif %}
	<a href="{{stock.href}}" target="_blank" title="{{ stock.stock_id }}">
	{{ stock.stock_name }} 
	</a></td>
            {% for p in stock.stock_price_list %}
            <td  style="width:40;word-break:break-all; word-wrap:break-all;" ><div title="{{p.date}}" style="color:{{p.color}}">{{ p.price }}</div> </td>
            {% endfor %}
            <td><div id="last_comment_td_{{ stock.stock_id }}"><div style="word-break:break-all; word-wrap:break-all;"  title="{{stock.last_comment.1}}">{{stock.last_comment.0}}</div>{% if isAdmin and stock.last_comment.0 %}<div><input type="button" value="Next" onclick="nextComment('{{stock.last_comment.2}}', '{{stock.last_comment.1}}')" /></div>{% endif %}</div></td>
            {% if isAdmin %}
            <td  style="width:40"><input type="button" value="delete"          onclick="deleteStock(this, '{{stock.stock_id}}')" /></td>
            <td  style="width:80"><input name="comment" id="comment{{stock.stock_id}}"/><input type="button" value="addNewComment" onclick="addNewComment('{{stock.stock_id}}')"></td>
             {% endif %}
            <tr>
        {% endfor %}
        <table>
	<p><div>
		{% if hasPre %}
		    <div style="float:right"><a href="{{preHref}}">Pre Page</a></div>
		{% endif %}
		{% if hasPre or hasNext %}
		<div style="float:right">
			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GoTo:<select onchange="changePage(this)">
				{% for p in pageNoList %}
				    <option value="{{p.0}}" {% if p.2 %}selected{% endif %}>{{p.1}}</option>
				{% endfor %}
			</select>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</div>
		{% endif %}
		{% if hasNext %}
		    <div style="float:right"><a href="{{nextHref}}">Next Page</a></div>
		{% endif %}
	</div></p>
	<p></p>
	<br/>
	{% if False %}
	<br/>
	<br/>
	<fieldset id="source"> 
	      <legend>admin user manager:</legend> 
	     <p>Nick name:<input id="adminUserName" type="input" name="name" /></p>
		<p>Path regex:<input id="adminUserPath" type="input" name="path" /></p>
		<p><input type="button" value="Delete" onclick="deleteAdminUser()"/>
			<input type="button" value="Add" onclick="addAdminUser()" /></p>
	</fieldset>
	{% endif %}
	<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
	<script type="text/javascript" src="/jscripts/main.js"></script>
	<script type="text/javascript" src="/jscripts/jquery.jnotify.min.js"></script>
	<script type="text/javascript"> 
	      $(function() {
	        //$("#mainTable tr:nth-child(even)").addClass("striped");
	      });
	</script> 
  </body>
</html>